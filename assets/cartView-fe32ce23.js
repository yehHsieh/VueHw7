import{_ as I,o as d,c,b as u,e as t,F as h,f as g,g as m,t as n,h as f,v as x}from"./index-77ef22e1.js";const{VITE_APP_URL:i,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"practiceapi",VITE_TEXT:"…",BASE_URL:"/VueHw6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},b={data(){return{products:[],productId:"",cart:{},loadingItem:"",user:{}}},methods:{getProducts(e){this.loadingItem=e,this.$http.get(`${i}/v2/api/${r}/products/all`).then(o=>{console.log("產品列表:",o.data.products),this.products=o.data.products,this.loadingItem=""})},getCarts(){this.$http.get(`${i}/v2/api/${r}/cart`).then(e=>{console.log("購物車:",e.data),this.cart=e.data.data})},updateCartItem(e){const o={product_id:e.product.id,qty:e.qty};console.log(o,e.id),this.loadingItem=e.id,this.$http.put(`${i}/v2/api/${r}/cart/${e.id}`,{data:o}).then(_=>{console.log("更新購物車:",_.data),this.getCarts(),this.loadingItem=""})},deleteItem(e){this.loadingItem=e.id,this.$http.delete(`${i}/v2/api/${r}/cart/${e.id}`).then(o=>{console.log("刪除購物車:",o.data),this.getCarts(),this.loadingItem=""})}},mounted(){this.getProducts(),this.getCarts()}},v={class:"table align-middle"},P=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),V=["onClick","disabled"],$=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),y={class:"input-group input-group-sm"},C=["onUpdate:modelValue","onChange","disabled"],E=["value"],T={class:"text-end"},k=t("small",{class:"text-success"},"價格：",-1),A=t("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"},R=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),S={class:"text-end text-success"};function U(e,o,_,q,l,p){return d(),c(h,null,[u(" 這是購物車頁面 "),t("table",v,[P,t("tbody",null,[l.cart.carts?(d(!0),c(h,{key:0},g(l.cart.carts,s=>(d(),c("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteItem(s),disabled:s.id===l.loadingItem},[$,u(" x ")],8,V)]),t("td",null,n(s.product.title),1),t("td",null,[t("div",y,[f(t("select",{class:"form-control",name:"",id:"","onUpdate:modelValue":a=>s.qty=a,onChange:a=>p.updateCartItem(s),disabled:s.id===l.loadingItem},[(d(),c(h,null,g(20,a=>t("option",{value:a,key:`${a}1223`},n(a),9,E)),64))],40,C),[[x,s.qty]])])]),t("td",T,[k,u(" "+n(s.total),1)])]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[A,t("td",D,n(l.cart.total),1)]),t("tr",null,[R,t("td",S,n(l.cart.final_total),1)])])])],64)}const B=I(b,[["render",U]]);export{B as default};
